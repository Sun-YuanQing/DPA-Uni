(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/process-scanOrder/process-scanOrder"],{4567:function(e,r,n){"use strict";n.r(r);var i=n("8967"),t=n("980f");for(var o in t)"default"!==o&&function(e){n.d(r,e,function(){return t[e]})}(o);var u=n("2877"),d=Object(u["a"])(t["default"],i["a"],i["b"],!1,null,null,null);r["default"]=d.exports},"48b7":function(e,r,n){"use strict";(function(e){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=o(n("2e17")),t=(o(n("f2a9")),o(n("00e0")),o(n("409c")));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(){return n.e("components/barcode-input/barcode-input").then(n.bind(null,"d7ce"))},d={components:{barcodeInput:u},data:function(){return{allowScanPro:!0,proList:null,curOrder:{},padBinding:{proName:"",deviceName:""}}},props:{value:Object},model:{prop:"value",event:"onGetOrder"},watch:{value:{immediate:!0,handler:function(e){this.curOrder=e}}},methods:{onScaned:function(r){var n=this,o=this;e.showLoading({mask:!0}),i.default.base_scanOrder({data:{moLot:r},success:function(r){if(console.log(JSON.stringify(r)," at components\\process-scanOrder\\process-scanOrder.vue:60"),0==r.length)return e.showToast({icon:"none",title:"当前单据不存在！"}),void n.$refs.input_order.setFocus();o.proList=r,o.curOrder={},n.$refs.input_device.setFocus(),t.default.showScanedAudio()},failure:function(e){n.$refs.input_order.setFocus(),t.default.showAudio()},complete:function(r,n,i){t.default.tryCatchApi({status:r,message:n}),e.hideLoading()}})},onDeviceScaned:function(e){var r=this;t.default.getPadBinding({data:{deviceNo:e,showTips:!1},success:function(n){if(r.padBinding=n,r.allowScanPro=null==n,null==n){var i=r.validDeviceInOrder(e);if(null==i)return;r.curOrder.deviceName=i.deviceName,r.curOrder.deviceNo=e,r.padBinding={},r.padBinding.configDevice=e,r.padBinding.deviceName=i.deviceName,r.$refs.input_pro.setFocus()}else{var o=r.validDeviceInOrder(r.padBinding.configDevice);if(null==o)return;r.curOrder.deviceName=r.padBinding.deviceName,r.curOrder.deviceNo=r.padBinding.configDevice;var u=r.onProAutoScaned(r.padBinding.configDevice,r.padBinding.proItemNo);if(!u)return}t.default.showScanedAudio()},failure:function(){r.padBinding=null,r.$refs.input_device.clear()}})},onProScaned:function(r){var n=this;if(null==n.proList)return e.showToast({title:"请先扫描制单！",icon:"none"}),t.default.showAudio(),void this.$refs.input_order.setFocus();n.onProAutoScaned(n.padBinding.configDevice,r)},onProAutoScaned:function(e,r){var n=this;return n.curOrder=n.validProInOrder(e,r),null!=n.curOrder&&(n.curOrder.proNo=n.curOrder.custNo,n.curOrder.proItemNo=n.curOrder.itemNo,n.curOrder.proName=n.curOrder.custName1,n.curOrder.deviceName=n.padBinding.deviceName,n.curOrder.deviceNo=n.padBinding.configDevice,t.default.showScanedAudio(),this.$emit("onGetOrder",n.curOrder),!0)},validDeviceInOrder:function(r){for(var n=this,i=null,o=0;o<n.proList.length;o++)for(var u=0;u<n.proList[o].devices.length;u++)if(n.proList[o].devices[u].deviceNo==r){i=n.proList[o].devices[u];break}return null==i&&(e.showToast({title:"当前设备不属于该工单！",icon:"none"}),t.default.showAudio(),n.$refs.input_device.setFocus(),n.$refs.input_device.clear()),i},validProInOrder:function(r,n){for(var i=this,o=null,u=0;u<i.proList.length;u++)if(i.proList[u].itemNo==n)for(var d=0;d<i.proList[u].devices.length;d++)if(i.proList[u].devices[d].deviceNo==r){o=i.proList[u];break}return null==o?(e.showToast({title:"当前工序不属于该工单！",icon:"none"}),t.default.showAudio(),i.$refs.input_pro.setFocus(),i.$refs.input_pro.clear(),!1):o},validInputFinish:function(){var r=this;return null==r.proList?(e.showToast({title:"请先扫描制单！",icon:"none"}),t.default.showAudio(),this.$refs.input_order.setFocus(),!1):null==r.curOrder||0==r.curOrder.deviceNo.length?(e.showToast({title:"请先扫描设备！",icon:"none"}),t.default.showAudio(),this.$refs.input_device.setFocus(),!1):null!=r.curOrder&&0!=r.curOrder.custName1.length||(e.showToast({title:"请先扫描工序！",icon:"none"}),t.default.showAudio(),this.$refs.input_pro.setFocus(),!1)},getCurOrder:function(){return this.validInputFinish()?this.order:null},setOrderFocus:function(){this.$refs.input_order.setFocus()}}};r.default=d}).call(this,n("6e42")["default"])},8967:function(e,r,n){"use strict";var i=function(){var e=this,r=e.$createElement;e._self._c},t=[];n.d(r,"a",function(){return i}),n.d(r,"b",function(){return t})},"980f":function(e,r,n){"use strict";n.r(r);var i=n("48b7"),t=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(r,e,function(){return i[e]})}(o);r["default"]=t.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/process-scanOrder/process-scanOrder-create-component',
    {
        'components/process-scanOrder/process-scanOrder-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('6e42')['createComponent'](__webpack_require__("4567"))
        })
    },
    [['components/process-scanOrder/process-scanOrder-create-component']]
]);                
