(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/boxMng/box-fulltest"],{"04f0":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},a=[];o.d(e,"a",function(){return n}),o.d(e,"b",function(){return a})},"173f":function(t,e,o){"use strict";o.r(e);var n=o("601b"),a=o.n(n);for(var i in n)"default"!==i&&function(t){o.d(e,t,function(){return n[t]})}(i);e["default"]=a.a},3386:function(t,e,o){"use strict";o.r(e);var n=o("04f0"),a=o("173f");for(var i in a)"default"!==i&&function(t){o.d(e,t,function(){return a[t]})}(i);var s=o("2877"),l=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,null,null);e["default"]=l.exports},"601b":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(o("2e17")),a=s(o("f2a9")),i=(s(o("00e0")),s(o("409c")));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(){return o.e("components/barcode-input/barcode-input").then(o.bind(null,"d7ce"))},r={components:{barcodeInput:l},data:function(){new Date;return{progNo:"",old:{scrollTop:0},scrollTop:0,scrollHeight:0,order:{tagDetails:[]},orderItemSelected:{}}},onLoad:function(t){this.progNo=t.progNo||"OPDA00016",console.log(this.progNo," at pages\\boxMng\\box-fulltest.vue:67")},onReady:function(){i.default.getListHeight(this)},onBackPress:function(t){return i.default.backPress(t,this.order.tagDetails.length>0)},methods:{onBoxScaned:function(e){var o=this;n.default.pda_pdaboxbarcodedetail({data:{boxqrCode:e},success:function(t){o.order=t,i.default.showScanedAudio(),o.$refs.input_part.setFocus()},failure:function(t){i.default.showAudio(),o.$refs.input_box.setFocus()},complete:function(e,o,n){i.default.tryCatchApi({status:e,message:o}),t.hideLoading()}})},onPartScaned:function(e){var o=this,s=this;n.default.basic_QRCodeAnalysis({data:{qrCode:e},success:function(e){for(var n=!1,l=0;l<o.order.tagDetails.length;l++){var r=o.order.tagDetails[l];if(r.tagId==e.tagId){r.fullInspectionSw=1,r.entityState=a.default.entityState.modified,n=!0,t.showToast({title:"扫描成功"}),i.default.showScanedAudio(),o.onScrollTop(l);break}}n||(t.showToast({title:"扫描错误，当前标签不属于该单据",icon:"none"}),i.default.showAudio()),i.default.automateSave(s.order.tagDetails,"fullInspectionSw",1,s.onSave)},failure:function(t){i.default.showAudio()},complete:function(e,n,a){o.$refs.input_part.setFocus(),i.default.tryCatchApi({status:e,message:n}),t.hideLoading()}})},onSave:function(){var e=this;if(this.order.tagDetails.length<=0)return t.showToast({title:"请扫描外箱",icon:"none"}),void this.$refs.input_box.setFocus();for(var o=-1,a=0;a<this.order.tagDetails.length;a++){var s=this.order.tagDetails[a];if(1!=s.fullInspectionSw){o=a;break}}if(o>=0)return i.default.showAudio(),this.onScrollTop(o),void t.showToast({title:"全检未完成",icon:"none"});n.default.boxIO_put({data:this.order,success:function(o){t.showToast({title:"封箱完成",icon:"none",mask:!0}),i.default.dataInit(e),e.$refs.input_box.setFocus()},failure:function(t){i.default.showAudio()},complete:function(e,o,n){i.default.tryCatchApi({status:e,message:o}),t.hideLoading()}})},onSelectedItem:function(t){for(var e=0;e<this.order.tagDetails.length;e++){var o=this.order.tagDetails[e];e==t?(o.selectItemClass="uni-list-cell-selected",this.orderItemSelected=o):o.selectItemClass=""}},scroll:function(t){this.old.scrollTop=t.detail.scrollTop},onScrollTop:function(e){var o=this;this.onSelectedItem(e);var n=t.createSelectorQuery().in(this).select(".scroll-view-item");n.boundingClientRect(function(t){o.scrollTop=o.old.scrollTop,o.$nextTick(function(){this.scrollTop=t.height*e})}).exec()}}};e.default=r}).call(this,o("6e42")["default"])}},[["f7c9","common/runtime","common/vendor"]]]);