(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/appconfig/set-workcenter"],{"0a7e":function(e,t,o){"use strict";var s=function(){var e=this,t=e.$createElement;e._self._c},i=[];o.d(t,"a",function(){return s}),o.d(t,"b",function(){return i})},"3d38":function(e,t,o){"use strict";o.r(t);var s=o("ea30"),i=o.n(s);for(var a in s)"default"!==a&&function(e){o.d(t,e,function(){return s[e]})}(a);t["default"]=i.a},dfed:function(e,t,o){"use strict";o.r(t);var s=o("0a7e"),i=o("3d38");for(var a in i)"default"!==a&&function(e){o.d(t,e,function(){return i[e]})}(a);var n=o("2877"),r=Object(n["a"])(i["default"],s["a"],s["b"],!1,null,null,null);t["default"]=r.exports},ea30:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(o("00e0")),i=r(o("2e17")),a=r(o("f2a9")),n=r(o("409c"));function r(e){return e&&e.__esModule?e:{default:e}}var c={components:{},data:function(){return{wcIndex:0,workcenterList:[],processInfo:{},deviceInfo:{},scrollTop:0,scrollHeight:0,header:null}},onShow:function(){var e=s.default.get(a.default.storageKeys.navBackData_searchDeivce);e&&(this.deviceInfo=e,s.default.set(a.default.storageKeys.navBackData_searchDeivce,null));var t=s.default.get(a.default.storageKeys.navBackData_searchProcess);t&&(this.processInfo=t,this.processInfo.proName=this.processInfo.custName1,this.processInfo.proItemNo=this.processInfo.itemNo,s.default.set(a.default.storageKeys.navBackData_searchProcess,null))},onLoad:function(e){this.getWorkCenters()},onReady:function(){n.default.getListHeight(this)},methods:{getWorkCenters:function(){var t=this;e.showLoading({title:"加载中..",mask:!0}),i.default.basic_workCenterList({data:{},success:function(e){t.workcenterSource=e,t.workcenterSource.insert(0,{wcNo:"-1",wcName:"无"});for(var o=0;o<t.workcenterSource.length;o++)t.workcenterList.push(t.workcenterSource[o].wcName);t.getWCSet()},complete:function(t,o,s){n.default.tryCatchApi({status:t,message:o}),e.hideLoading()}})},getWCSet:function(){var t=this;i.default.messhopconfig_Get({success:function(e){if(t.header=e,e.id){for(var o=0;o<t.workcenterSource.length;o++)if(t.workcenterSource[o].wcNo==e.configWorkCenter){t.wcIndex=o;break}t.processInfo.proName=e.proName||"",t.processInfo.proItemNo=e.proItemNo,t.processInfo.custNo=e.configPro,t.deviceInfo.deviceNo=e.configDevice,t.deviceInfo.deviceName=e.deviceName||""}},complete:function(t,o,s){n.default.tryCatchApi({status:t,message:o}),e.hideLoading()}})},bindPickerChange:function(e){this.wcIndex=e.target.value},getProcessList:function(){e.navigateTo({url:"/pages/common/search-processList"})},getDeviceList:function(){e.navigateTo({url:"/pages/common/search-deviceList"})},onAbolishSave:function(){this.clearDevice(),this.clearProcess();var t=s.default.get(a.default.storageKeys.login);this.header.id?this.header.entityState=a.default.entityState.modified:(this.header={},this.header.id=plus.device.uuid,this.header.createDate=(new Date).format("yyyy/MM/dd"),this.header.entityState=a.default.entityState.added),console.log("this.processInfo: "+JSON.stringify(this.processInfo)," at pages\\appconfig\\set-workcenter.vue:170"),console.log("this.deviceInfo: "+JSON.stringify(this.deviceInfo)," at pages\\appconfig\\set-workcenter.vue:171"),this.header.userNo=t.userID,this.header.configPro="",this.header.proItemNo="",this.header.proName="",this.header.configDevice="",this.header.deviceName="",this.header.configWorkCenter="",this.header.wcName="",console.log("this.header: "+JSON.stringify(this.header)," at pages\\appconfig\\set-workcenter.vue:180"),e.showLoading({title:"加载中..",mask:!0}),i.default.messhopconfig_Save({data:this.header,success:function(t){e.showToast({title:"保存成功",icon:"none"}),s.default.set(a.default.storageKeys.padBinding,null)},complete:function(t,o,s){n.default.tryCatchApi({status:t,message:o}),e.hideLoading()}})},onSave:function(){var t=this;if(this.processInfo.custNo)if(this.deviceInfo.deviceNo){var o=s.default.get(a.default.storageKeys.login);this.header.id?this.header.entityState=a.default.entityState.modified:(this.header={},this.header.id=plus.device.uuid,this.header.createDate=new Date,this.header.entityState=a.default.entityState.added),console.log("this.processInfo: "+JSON.stringify(this.processInfo)," at pages\\appconfig\\set-workcenter.vue:227"),console.log("this.deviceInfo: "+JSON.stringify(this.deviceInfo)," at pages\\appconfig\\set-workcenter.vue:228"),this.header.userNo=o.userID,this.header.configPro=this.processInfo.custNo||"",this.header.proItemNo=this.processInfo.proItemNo||"",this.header.proName=this.processInfo.proName||"",this.header.configDevice=this.deviceInfo.deviceNo||"",this.header.deviceName=this.deviceInfo.deviceName||"",this.header.configWorkCenter=0==this.wcIndex?"":this.workcenterSource[this.wcIndex].wcNo,this.header.wcName=0==this.wcIndex?"":this.workcenterSource[this.wcIndex].wcName,console.log("this.header: "+JSON.stringify(this.header)," at pages\\appconfig\\set-workcenter.vue:237"),e.showLoading({title:"加载中..",mask:!0}),i.default.messhopconfig_Save({data:this.header,success:function(o){e.showToast({title:"保存成功",icon:"none"}),s.default.set(a.default.storageKeys.padBinding,t.header)},complete:function(t,o,s){n.default.tryCatchApi({status:t,message:o}),e.hideLoading()}})}else e.showToast({title:"请录入设备",icon:"none"});else e.showToast({title:"请录入工序",icon:"none"})},clearProcess:function(){this.processInfo={}},clearDevice:function(){this.deviceInfo={}}}};t.default=c}).call(this,o("6e42")["default"])}},[["9b97","common/runtime","common/vendor"]]]);