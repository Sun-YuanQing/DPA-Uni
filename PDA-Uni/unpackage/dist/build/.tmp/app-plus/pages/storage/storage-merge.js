(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/storage/storage-merge"],{"1e9b":function(t,e,o){"use strict";o.r(e);var n=o("f9e1"),i=o("5b6b");for(var l in i)"default"!==l&&function(t){o.d(e,t,function(){return i[t]})}(l);var s=o("2877"),a=Object(s["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=a.exports},"5b6b":function(t,e,o){"use strict";o.r(e);var n=o("e044"),i=o.n(n);for(var l in n)"default"!==l&&function(t){o.d(e,t,function(){return n[t]})}(l);e["default"]=i.a},e044:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=l(o("2e17")),i=(l(o("f2a9")),l(o("00e0")),l(o("409c")));function l(t){return t&&t.__esModule?t:{default:t}}var s=function(){return o.e("components/barcode-input/barcode-input").then(o.bind(null,"d7ce"))},a={components:{barcodeInput:s},data:function(){return{progNo:"",old:{scrollTop:0},scrollTop:0,scrollHeight:0,details:[]}},onLoad:function(t){this.progNo=t.progNo},onReady:function(){i.default.getListHeight(this)},onBackPress:function(t){return i.default.backPress(t,this.details.length>0)},methods:{onStorageScaned:function(e){var o=this,l=this;t.showLoading({mask:!0}),n.default.OpenMes_scmboxbyqrcode({data:{qrCode:e},success:function(e){for(var o=0;o<l.details.length;o++){var n=l.details[o];if(n.tagId==e.tagId)return l.onScrollTop(o),t.showModal({title:"提示",content:"该标签已扫描,是否要删除",success:function(t){t.confirm?l.details.splice(o,1):t.cancel}}),void i.default.showAudio()}return l.details.length>0&&l.details[0].binWhNo!=e.binWhNo?(t.showToast({title:"所在仓库不一致",icon:"none"}),void i.default.showAudio()):l.details.length>0&&l.details[0].partItemNo!=e.partItemNo?(t.showToast({title:"料号不一致",icon:"none"}),void i.default.showAudio()):l.details.length>0&&l.details[0].inLot!=e.inLot?(t.showToast({title:"批次号不一致",icon:"none"}),void i.default.showAudio()):(l.details.push(e),l.onScrollTop(l.details.length-1),void i.default.showScanedAudio())},failure:function(t){i.default.showAudio()},complete:function(e,n,l){o.$refs.input_storage.setFocus(),i.default.tryCatchApi({status:e,message:n}),t.hideLoading()}})},onSave:function(){var e=this;if(0==e.details.length)return t.showToast({title:"请扫描外箱",icon:"none"}),e.$refs.input_storage.setFocus(),void i.default.showAudio();t.navigateTo({url:"storage-mergeDet?progNo="+this.progNo+"&data="+JSON.stringify(e.details)}),i.default.dataInit(this)},onSelectedItem:function(t){for(var e=i.default.clone(this.details),o=0;o<e.length;o++){var n=e[o];n.selectItemClass=o==t?"uni-list-cell-selected":""}this.details=e},scroll:function(t){this.old.scrollTop=t.detail.scrollTop},onScrollTop:function(e){var o=this;this.onSelectedItem(e);var n=t.createSelectorQuery().in(this).select(".scroll-view-item");n.boundingClientRect(function(t){o.scrollTop=o.old.scrollTop,o.$nextTick(function(){null!=t&&(this.scrollTop=t.height*e)})}).exec()}}};e.default=a}).call(this,o("6e42")["default"])},f9e1:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},i=[];o.d(e,"a",function(){return n}),o.d(e,"b",function(){return i})}},[["d105","common/runtime","common/vendor"]]]);