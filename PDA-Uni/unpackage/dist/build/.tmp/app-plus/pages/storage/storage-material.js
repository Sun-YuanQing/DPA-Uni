(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/storage/storage-material"],{"5a39":function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},s=[];o.d(e,"a",function(){return a}),o.d(e,"b",function(){return s})},a420:function(t,e,o){"use strict";o.r(e);var a=o("5a39"),s=o("fb28");for(var r in s)"default"!==r&&function(t){o.d(e,t,function(){return s[t]})}(r);var n=o("2877"),i=Object(n["a"])(s["default"],a["a"],a["b"],!1,null,null,null);e["default"]=i.exports},cdf2:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(o("2e17")),s=i(o("f2a9")),r=i(o("00e0")),n=i(o("409c"));function i(t){return t&&t.__esModule?t:{default:t}}var l=function(){return o.e("components/barcode-input/barcode-input").then(o.bind(null,"d7ce"))},d=function(){return o.e("components/label-print/print-button").then(o.bind(null,"4ae8"))},c={components:{barcodeInput:l,printButton:d},data:function(){return{old:{scrollTop:0},scrollTop:0,scrollHeight:0,isStorageBin:null,details:[],partItemNos:"",tagIds:"",binNos:"",reportModel:{progNo:"",showReport:!1,isMultiPrint:!1,dataSource:[],isNeedValidTag:!1},showPrint:!1}},onLoad:function(t){this.reportModel.progNo=t.progNo,this.isStorageBin=r.default.get(s.default.storageKeys.IsStorageBin)},onReady:function(){n.default.getListHeight(this)},onBackPress:function(t){return n.default.backPress(t,this.details)},methods:{onPartItemNosScaned:function(e){t.showLoading({mask:!0});var o=this;a.default.boxfqc_QRCodeAnalysis({data:{qrCode:e,enumBarCode:2},success:function(t){o.partItemNos=t.partItemNo,o.init(o.partItemNos,o.tagIds,o.binNos),o.$refs.input_BinNos.setFocus()},failure:function(t){n.default.showAudio()},complete:function(e,o,a){n.default.tryCatchApi({status:e,message:o}),t.hideLoading()}})},onBinNosScaned:function(e){var o=this;t.showLoading({mask:!0}),this.isStorageBin?a.default.bas_storagebin({data:{binNo:e},success:function(e){console.log(n.default.outputLog(e)," at pages\\storage\\storage-material.vue:135"),e.length<=0?(t.showToast({title:"货架不存在!",icon:"none"}),o.$refs.input_BinNos.clear(),n.default.showAudio()):(o.binNos=e[0].binNo,o.$refs.input_PartItemNos.setFocus(),n.default.showScanedAudio()),o.init(o.partItemNos,o.tagIds,o.binNos)},complete:function(e,o,a){n.default.tryCatchApi({status:e,message:o}),t.hideLoading()}}):(console.log(e," at pages\\storage\\storage-material.vue:162"),a.default.bas_wh({data:{filter:'whNo = "'+e+'"'},success:function(e){console.log(n.default.outputLog(e)," at pages\\storage\\storage-material.vue:168"),e.length<=0?(t.showToast({title:"仓库不存在!",icon:"none"}),o.$refs.input_BinNos.clear(),n.default.showAudio()):(o.binNos=e[0].whNo,o.$refs.input_PartItemNos.setFocus(),n.default.showScanedAudio()),o.init(o.partItemNos,o.tagIds,o.binNos)},complete:function(e,o,a){n.default.tryCatchApi({status:e,message:o}),t.hideLoading()}}))},init:function(e,o,s){var r=this;if(""==e&&""==o&&""==s)return t.showToast({title:"请指定条件！",icon:"none"}),void n.default.showAudio();a.default.OpenMes_binmateriallistbyparm({data:{binNos:s,tagIds:o,partItemNos:e},success:function(t){r.details=t,n.default.showScanedAudio()},failure:function(t){n.default.showAudio()},complete:function(e,o,a){r.$refs.input_PartItemNos.setFocus(),n.default.tryCatchApi({status:e,message:o}),t.hideLoading()}})},onShowPrint:function(t){this.showPrint=!0,this.onPartPrint()},onPartPrint:function(t){console.log(this.orderItemSelected," at pages\\storage\\storage-material.vue:232");var e={};e.proDate=this.orderItemSelected.proDate?this.orderItemSelected.proDate.slice(0,10).replace(/-/g,"/"):(new Date).format("yyyy/MM/dd"),e.partNo=this.orderItemSelected.partNo,e.partItemNo=this.orderItemSelected.partItemNo,e.partName=this.orderItemSelected.partName,e.partSpec=this.orderItemSelected.partSpec,e.serialNo="",e.tagFlag="",e.boxTagId=this.orderItemSelected.boxTagId||"",e.purLot=this.orderItemSelected.purLot,e.poMoSoLot=this.orderItemSelected.purLot,e.sheetQty=this.orderItemSelected.sheetQty,e.tagId=this.orderItemSelected.tagId,e.linkBoardQty="",e.inLot=this.orderItemSelected.inLot,e.citemNo=this.orderItemSelected.citemNo,e.custNo=this.orderItemSelected.custNo,e.custName=this.orderItemSelected.custName,e.ordLot="",e.custTagId="",e.reservelocus=this.orderItemSelected.reservelocus,e.proItemNo="",e.proName="",e.toProItemNo="",e.toProName="",e.dayId="",e.spcSta="",e.printType="",e.deviceNo="",e.deviceName="",console.log(e," at pages\\storage\\storage-material.vue:267"),this.reportModel.dataSource=[],this.reportModel.dataSource.push(e),this.$refs.printBtn.execPrint()},printComplete:function(){console.log("printComplete"," at pages\\storage\\storage-material.vue:273"),this.showPrint=!1},onprintCancel:function(){console.log("onprintCancel"," at pages\\storage\\storage-material.vue:277"),this.showPrint=!1,this.reportModel.dataSource=[]},tagValid:function(){console.log("tagValid"," at pages\\storage\\storage-material.vue:283")},scroll:function(t){this.old.scrollTop=t.detail.scrollTop},onSelectedItem:function(t){for(var e,o=0;o<this.details.length;o++){var a=this.details[o];o==t?(a.selectItemClass="uni-list-cell-selected",this.orderItemSelected=a,e=n.default.clone(this.orderItemSelected),this.orderItemSelected=e,console.log(this.orderItemSelected," at pages\\storage\\storage-material.vue:299")):a.selectItemClass=""}}}};e.default=c}).call(this,o("6e42")["default"])},fb28:function(t,e,o){"use strict";o.r(e);var a=o("cdf2"),s=o.n(a);for(var r in a)"default"!==r&&function(t){o.d(e,t,function(){return a[t]})}(r);e["default"]=s.a}},[["711c","common/runtime","common/vendor"]]]);