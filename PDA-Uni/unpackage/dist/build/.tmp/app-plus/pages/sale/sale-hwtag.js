(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/sale/sale-hwtag"],{7452:function(t,e,a){"use strict";a.r(e);var o=a("7d06"),s=a.n(o);for(var n in o)"default"!==n&&function(t){a.d(e,t,function(){return o[t]})}(n);e["default"]=s.a},"7d06":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=l(a("2e17")),s=l(a("f2a9")),n=l(a("00e0")),i=l(a("409c")),u=a("2f62");function l(t){return t&&t.__esModule?t:{default:t}}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},o=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),o.forEach(function(e){r(t,e,a[e])})}return t}function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var d=function(){return a.e("components/barcode-input/barcode-input").then(a.bind(null,"d7ce"))},f={components:{barcodeInput:d},data:function(){return{progNo:"",old:{scrollTop:0},scrollTop:0,scrollHeight:0,tagCheckEmp:"",details:[],hwASN:[],hwDetails:null}},onLoad:function(t){this.progNo=t.progNo},onReady:function(){i.default.getListHeight(this)},onShow:function(){this.hwDetails=i.default.clone(n.default.get(s.default.storageKeys.hwDetails));var t=this;console.log(i.default.outputLog(t.hwDetails)," at pages\\sale\\sale-hwtag.vue:73"),null!=t.hwDetails&&(t.hwDetails.details.forEach(function(e){t.details.forEach(function(a,o){a.selectItemClass="",e.partItemNo==a.partItemNo&&t.details.splice(o,1)})}),t.hwDetails.details.forEach(function(e,a){e.selectItemClass="",t.details.push(e)}),t.hwDetails.hwASN.forEach(function(e,a){t.hwASN.forEach(function(t,a){t.selectItemClass="",e.pkgId==t.pkgId&&(t.m_ishwASN=e.m_ishwASN)})}),n.default.set(s.default.storageKeys.hwDetails,null)),1==t.details&&i.default.automateSave(t.details,"tagCheckSw",1,t.onSave)},onBackPress:function(t){return i.default.backPress(t,this.details.length>0)},methods:c({},(0,u.mapMutations)(["setUrldata"]),{onUserScaned:function(e){""!=e?(this.tagCheckEmp=e,i.default.showScanedAudio()):(i.default.showAudio(),t.showToast({icon:"none",title:"人员不正确!!!"}),this.$refs.input_user.setFocus()),this.$refs.input_order.setFocus()},onScaned:function(e){var a=this,s=this;if(console.log(""==this.tagCheckEmp," at pages\\sale\\sale-hwtag.vue:124"),""==this.tagCheckEmp)return t.showToast({icon:"none",title:"人员不正确!!!"}),i.default.showAudio(),void this.$refs.input_user.setFocus();t.showLoading({mask:!0}),o.default.OpenMes_saloutnoticeasnbysheetnopkgid({data:{sheetNo:e},success:function(n){if(n.length<=0)return t.showToast({icon:"none",title:"没有需要校验的ASN!!!"}),void a.$refs.input_order.setFocus();a.hwASN=n,a.hwASN.forEach(function(t,e){t.m_ishwASN=!1}),o.default.Pda_pdasalooutdetailbynotice({data:{noticeNo:e},success:function(t){a.details=t,a.details.forEach(function(t,e){t.scanQty=t.scanQty||0,t.lastScanQty=Number(t.lastScanQty)||Number(t.sheetQty),t.tagCheckEmp=s.tagCheckEmp,t.scantagDetails=t.scantagDetails||[]}),a.$refs.input_part.setFocus(),i.default.showScanedAudio()},failure:function(t){i.default.showAudio(),a.$refs.input_order.setFocus()},complete:function(e,a,o){i.default.tryCatchApi({status:e,message:a}),t.hideLoading()}}),a.$refs.input_part.setFocus()},failure:function(t){i.default.showAudio(),a.$refs.input_order.setFocus()},complete:function(e,a,o){i.default.tryCatchApi({status:e,message:a}),t.hideLoading()}})},onPartScaned:function(e){var a=this,s=this;o.default.basic_QRCodeAnalysis({data:{qrCode:e},success:function(e){var o=[];s.details.forEach(function(t,a){t.partItemNo==e.partItemNo&&(t.tagCheckEmp=s.tagCheckEmp,o.push(t))});var n=[];if(console.log(i.default.outputLog(s.hwASN)," at pages\\sale\\sale-hwtag.vue:213"),console.log(i.default.outputLog(e)," at pages\\sale\\sale-hwtag.vue:214"),s.hwASN.forEach(function(t,a){console.log(t.pn+"==="+e.suPartNo," at pages\\sale\\sale-hwtag.vue:216"),t.pn==e.suPartNo&&n.push(t)}),0==n)return t.showToast({title:"该标签没有对应的ASN!!!",icon:"none"}),void i.default.showAudio();var u={};u.details=o,u.hwASN=n,u.data_hwtagscan=e,a.setUrldata(u),i.default.showScanedAudio(),t.navigateTo({url:"sale-hwtagDet"})},failure:function(t){i.default.showAudio()},complete:function(e,o,s){a.$refs.input_order.setFocus(),i.default.tryCatchApi({status:e,message:o}),t.hideLoading()}})},onSave:function(){var e=this,a=this;this.details.forEach(function(e,o){if(0==e.tagCheckSw)return a.onScrollTop(o),t.showToast({title:"请全部检验!!!",icon:"none"}),void i.default.showAudio()}),this.hwASN.forEach(function(e){if(0==e.m_ishwASN)return t.showToast({title:"请全部检验ASN!!!",icon:"none"}),void i.default.showAudio()}),this.details.forEach(function(t,e){t.scantagDetails=[]}),console.log(i.default.outputLog(this.details)," at pages\\sale\\sale-hwtag.vue:279"),o.default.sale_save_put({data:this.details,success:function(a){t.showToast({title:"保存成功"}),i.default.dataInit(e)},failure:function(t){i.default.showAudio()},complete:function(e,a,o){i.default.tryCatchApi({status:e,message:a}),t.hideLoading()}})},onSelectedItem:function(e){var a=this,o=this.details[e],s=[];this.details.forEach(function(t,e){t.partItemNo==o.partItemNo&&(t.tagCheckEmp=a.tagCheckEmp,s.push(t))});var n=[];if(console.log(i.default.outputLog(a.hwASN)," at pages\\sale\\sale-hwtag.vue:314"),a.hwASN.forEach(function(t,e){console.log(t.pn+"==="+o.cuPartNo," at pages\\sale\\sale-hwtag.vue:316"),t.pn==o.cuPartNo&&n.push(t)}),0==n)return t.showToast({title:"该标签没有对应的ASN!!!",icon:"none"}),void i.default.showAudio();var u={};u.details=s,u.hwASN=n,u.data_hwtagscan="",this.setUrldata(u),i.default.showScanedAudio(),t.navigateTo({url:"sale-hwtagDet"})},scroll:function(t){this.old.scrollTop=t.detail.scrollTop},onScrollTop:function(e){var a=this,o=t.createSelectorQuery().in(this).select(".scroll-view-item");o.boundingClientRect(function(t){a.scrollTop=a.old.scrollTop,a.$nextTick(function(){this.scrollTop=t.height*e})}).exec()}})};e.default=f}).call(this,a("6e42")["default"])},b734:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},s=[];a.d(e,"a",function(){return o}),a.d(e,"b",function(){return s})},edae:function(t,e,a){"use strict";a.r(e);var o=a("b734"),s=a("7452");for(var n in s)"default"!==n&&function(t){a.d(e,t,function(){return s[t]})}(n);var i=a("2877"),u=Object(i["a"])(s["default"],o["a"],o["b"],!1,null,null,null);e["default"]=u.exports}},[["34f9","common/runtime","common/vendor"]]]);