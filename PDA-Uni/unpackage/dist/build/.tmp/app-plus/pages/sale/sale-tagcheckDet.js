(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/sale/sale-tagcheckDet"],{"363a":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},s=[];o.d(e,"a",function(){return n}),o.d(e,"b",function(){return s})},4396:function(t,e,o){"use strict";o.r(e);var n=o("363a"),s=o("cc3f");for(var a in s)"default"!==a&&function(t){o.d(e,t,function(){return s[t]})}(a);var r=o("2877"),i=Object(r["a"])(s["default"],n["a"],n["b"],!1,null,null,null);e["default"]=i.exports},cc3f:function(t,e,o){"use strict";o.r(e);var n=o("cde0"),s=o.n(n);for(var a in n)"default"!==a&&function(t){o.d(e,t,function(){return n[t]})}(a);e["default"]=s.a},cde0:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=u(o("2e17")),s=u(o("f2a9")),a=u(o("00e0")),r=u(o("409c")),i=o("2f62");function u(t){return t&&t.__esModule?t:{default:t}}function c(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},n=Object.keys(o);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),n.forEach(function(e){l(t,e,o[e])})}return t}function l(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var d=function(){return o.e("components/barcode-input/barcode-input").then(o.bind(null,"d7ce"))},f={components:{barcodeInput:d},data:function(){return{progNo:"",old:{scrollTop:0},scrollTop:0,scrollHeight:0,order:{sheetNo:"",partItemNo:""},partScan:null}},onLoad:function(t){var e=t.sheetLot||"";this.init(e)},onReady:function(){r.default.getListHeight(this)},onBackPress:function(t){return r.default.backPress(t,this.order.sheetNo.length>0)},methods:c({},(0,i.mapMutations)(["pageIO_true"]),{init:function(e){var o=this;t.showLoading({mask:!0}),n.default.sale_getDetails({data:{sheetLot:e},success:function(t){console.log(JSON.stringify(t)," at pages\\sale\\sale-tagcheckDet.vue:100"),o.order=t},complete:function(e,o,n){r.default.tryCatchApi({status:e,message:o}),t.hideLoading()}})},onPartScaned:function(e){var o=this;t.showLoading({mask:!0}),n.default.OpenMes_mesqrcodeinout({data:{qrCode:e},success:function(e){e.partItemNo!=o.order.partItemNo?(t.showToast({title:"标签扫描错误，料号不同！",icon:"none"}),o.$refs.input_part.setFocus()):(o.partScan=e,o.$refs.input_cuspart.setFocus(),r.default.showScanedAudio())},failure:function(t){o.$refs.input_cuspart.setFocus(),r.default.showAudio()},complete:function(e,o,n){r.default.tryCatchApi({status:e,message:o}),t.hideLoading()}})},onCusPartScaned:function(e){e!=this.order.partItemNo?(t.showToast({title:"标签扫描错误，料号不同！",icon:"none"}),r.default.showAudio(),this.$refs.input_cuspart.setFocus()):(t.showToast({title:"校验成功！"}),this.$refs.input_part.setFocus(),this.$refs.input_part.clear(),this.$refs.input_cuspart.clear(),r.default.showScanedAudio())},onSave:function(){var e=this;if(null==this.partScan)return t.showToast({title:"请先扫描校验！"}),void this.$refs.input_part.setFocus();var o=a.default.get(s.default.storageKeys.login);this.order.tagCheckSw="1",this.order.tagCheckEmp=o.userID,this.order.entityState=s.default.entityState.modified,this.order.outLotDetails=null,this.order.tagDetails=null,this.order.locklogDetails=null,t.showLoading({title:"加载中",mask:!0}),n.default.sale_save_put({data:this.order,success:function(o){t.showToast({title:"操作成功"}),r.default.dataInit(e),e.pageIO_true()},failure:function(t){r.default.showAudio()},complete:function(o,n,s){e.$refs.input_part.setFocus(),r.default.tryCatchApi({status:o,message:n}),t.hideLoading()}})},onSelectedItem:function(t){for(var e=0;e<this.order.details.length;e++){var o=this.order.details[e];e==t?(o.selectItemClass="uni-list-cell-selected",this.orderItemSelected=o):o.selectItemClass=""}},scroll:function(t){this.old.scrollTop=t.detail.scrollTop},onScrollTop:function(e){var o=this;this.onSelectedItem(e);var n=t.createSelectorQuery().in(this).select(".scroll-view-item");n.boundingClientRect(function(t){o.scrollTop=o.old.scrollTop,o.$nextTick(function(){this.scrollTop=t.height*e})}).exec()}})};e.default=f}).call(this,o("6e42")["default"])}},[["7250","common/runtime","common/vendor"]]]);