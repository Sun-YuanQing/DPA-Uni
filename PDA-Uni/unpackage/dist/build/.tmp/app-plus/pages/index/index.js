(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{1679:function(e,t,n){"use strict";n.r(t);var a=n("393d"),o=n("bdc6");for(var s in o)"default"!==s&&function(e){n.d(t,e,function(){return o[e]})}(s);n("d765");var u=n("2877"),r=Object(u["a"])(o["default"],a["a"],a["b"],!1,null,null,null);t["default"]=r.exports},"393d":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c},o=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o})},6627:function(e,t,n){},a6c7:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("2f62"),o=i(n("f2a9")),s=i(n("00e0")),u=i(n("2e17")),r=i(n("409c"));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){g(e,t,n[t])})}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(){return n.e("components/index-menus/index-menus").then(n.bind(null,"1871"))};function f(e){this.id=e.id||"",this.name=e.name||"",this.progNo=e.progNo||"",this.open=e.open||!1,this.pages=e.pages||[]}var d={components:{indexMenus:c},data:function(){return{lists:[],showMenus:!1,rightMenus:[]}},computed:(0,a.mapState)(["hasLogin"]),onNavigationBarButtonTap:function(e){this.showMenus=!0},onLoad:function(){this.rightMenus=[{icon:"gear",name:"远程设置"},{icon:"gear",name:"工作中心设置"},{icon:"gear",name:"错误日志"},{icon:"gear",name:"蓝牙打印设置"},{icon:"gear",name:"其它功能"},{icon:"bars",name:"退出"}];var t=s.default.get(o.default.storageKeys.login);if(this.hasLogin||t&&t.autologin){u.default.OpenMes_ErpReturnSet({success:function(e){s.default.set(o.default.storageKeys.ErpReturnSet,e),s.default.set(o.default.storageKeys.IsStorageBin,e.isStorageBin),s.default.set(o.default.storageKeys.erpInterfaceType,e.erpInterfaceType),s.default.set(o.default.storageKeys.mesInLotType,e.mesInLotType)},complete:function(e,t,n){}});var n=this;plus.runtime.getProperty(plus.runtime.appid,function(t){u.default.upgrade({data:{ver:t.version,custVer:""},retry:3,success:function(t){1!=t?n.getSysMenus():e.reLaunch({url:"/pages/login/login"})},complete:function(t,n,a){r.default.tryCatchApi({status:t,message:n}),e.hideLoading()}})})}else e.reLaunch({url:"/pages/login/login"})},onShow:function(){var e=s.default.get(o.default.storageKeys.login);console.log("方便查看你登陆的数据库"," at pages\\index\\index.vue:155"),console.log(e," at pages\\index\\index.vue:156")},methods:l({},(0,a.mapMutations)(["login","logout"]),{getSysMenus:function(){var t=this;e.showLoading(),u.default.getMenus({data:{allMenu:0},retry:2,success:function(e){s.default.set(o.default.storageKeys.menu,e);var n=[],a=new f({name:"常用功能"}),u=s.default.get(o.default.storageKeys.usedMenus);u&&(a.pages=u||[]),n.push(a);for(var r=0;r<e.length;r++)if(""==e[r].parentNo&&"1"==e[r].powerBrowse){a=new f({id:e[r].winName,name:e[r].progName,progNo:e[r].progNo});var i=t.getSubMenus(e,e[r].progNo);a.pages=i,n.push(a)}t.lists=n;var l=s.default.get(o.default.storageKeys.login);t.login(l)},complete:function(t,n,a){r.default.tryCatchApi({status:t,message:n}),e.hideLoading()}})},triggerCollapse:function(e){for(var t=0;t<this.lists.length;++t)this.lists[t].open=e===t&&!this.lists[e].open},goDetailPage:function(t){var n=s.default.get(o.default.storageKeys.usedMenus);n=void 0==n?[]:n;for(var a=-1,u=0;u<n.length;u++)if(n[u].id==t.id){a=u;break}-1==a?n.length>=4&&n.splice(0,1):n.splice(a,a+1),n.push(t),s.default.set(o.default.storageKeys.usedMenus,n),e.navigateTo({url:"/pages/"+t.id+"?progNo="+t.progNo})},getSubMenus:function(e,t){for(var n=[],a=0;a<e.length;a++)if(e[a].parentNo==t&&"1"==e[a].powerBrowse){var o=new f({id:e[a].winName,name:e[a].progName,progNo:e[a].progNo});n.push(o)}return n},userlogout:function(){u.default.logout(),this.logout();var t=s.default.get(o.default.storageKeys.login);t.sessionId="",t.autologin=!1,s.default.set(o.default.storageKeys.login,t),e.reLaunch({url:"/pages/login/login"})},setAppconfig:function(){e.navigateTo({url:"/pages/appconfig/appconfig"})},setWorkCenter:function(){e.navigateTo({url:"/pages/appconfig/set-workcenter"})},rightMenuClick:function(t){switch(t){case 0:this.setAppconfig();break;case 1:this.setWorkCenter();break;case 2:e.navigateTo({url:"/pages/log/log"});break;case 3:e.navigateTo({url:"/pages/appconfig/set-bluetooth"});break;case 4:e.navigateTo({url:"/pages/appconfig/otherconfig"});break;case 5:this.userlogout();break;default:break}this.showMenus=!1},rightMenuHide:function(){this.showMenus=!1}})};t.default=d}).call(this,n("6e42")["default"])},bdc6:function(e,t,n){"use strict";n.r(t);var a=n("a6c7"),o=n.n(a);for(var s in a)"default"!==s&&function(e){n.d(t,e,function(){return a[e]})}(s);t["default"]=o.a},d765:function(e,t,n){"use strict";var a=n("6627"),o=n.n(a);o.a}},[["d2a2","common/runtime","common/vendor"]]]);