(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/process/process-getngqty"],{"0673":function(t,e,o){"use strict";o.r(e);var s=o("6d0f"),n=o("7f37");for(var a in n)"default"!==a&&function(t){o.d(e,t,function(){return n[t]})}(a);o("459e");var i=o("2877"),c=Object(i["a"])(n["default"],s["a"],s["b"],!1,null,null,null);e["default"]=c.exports},"459e":function(t,e,o){"use strict";var s=o("c2c7"),n=o.n(s);n.a},"6d0f":function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c},n=[];o.d(e,"a",function(){return s}),o.d(e,"b",function(){return n})},"7f37":function(t,e,o){"use strict";o.r(e);var s=o("9257"),n=o.n(s);for(var a in s)"default"!==a&&function(t){o.d(e,t,function(){return s[t]})}(a);e["default"]=n.a},9257:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=c(o("2e17")),n=c(o("f2a9")),a=c(o("00e0")),i=c(o("409c"));function c(t){return t&&t.__esModule?t:{default:t}}var u=function(){return o.e("components/barcode-input/barcode-input").then(o.bind(null,"d7ce"))},r={components:{barcodeInput:u},data:function(){return{progNo:"",numder:0,ngobject:"ngobject",old:{scrollTop:0},scrollTop:0,scrollHeight:0,processInfo:[],head:{bugNo:"",bugName:"填写不良现象",sheetQty:"",custNo:"",itemNo:"",custName1:"填写制造工序",det:[]},orderItemSelected:{scanQty:0,lastScanQty:70,qualifiedQty:70},hesd:{details:[]},proItemNo:"",accIndex:0,accList:[],moulds:[]}},onLoad:function(t){this.moulds=JSON.parse(t.moulds);for(var e=0;e<this.moulds.length;e++)this.accList.push(this.moulds[e].proName);this.bindPickerChang1(0)},onShow:function(t){var e=a.default.get(n.default.storageKeys.navBackData_bug_Process);e&&(this.processInfo=e,this.head.bugNo=this.processInfo.bugNo,this.head.bugName=this.processInfo.bugName,a.default.set(n.default.storageKeys.navBackData_bug_Process,null))},onReady:function(){i.default.getListHeight(this)},onUnload:function(){a.default.set(n.default.storageKeys.navBackData_searchProcess,null)},onBackPress:function(t){return i.default.backPress(t,this.head.det.length>0)},methods:{bindPickerChange:function(t){this.accIndex=t.target.value,this.bindPickerChang1(this.accIndex)},bindPickerChang1:function(t){this.head.custName1=this.moulds[t].proName,this.head.itemNo=this.moulds[t].proItemNo,this.head.custNo=this.moulds[t].proNo},scroll:function(t){this.old.scrollTop=t.detail.scrollTop},onScrollTop:function(e){var o=this;this.onSelectedItem(e);var s=t.createSelectorQuery().in(this).select(".scroll-view-item");s.boundingClientRect(function(t){o.scrollTop=o.old.scrollTop,o.$nextTick(function(){this.scrollTop=t.height*e})}).exec()},onSelectedItem:function(t){for(var e=0;e<this.order.details.length;e++){var o=this.order.details[e];e==t?(o.selectItemClass="uni-list-cell-selected",this.orderItemSelected=o):o.selectItemClass=""}},onSave:function(){for(var e=this,o=0;o<this.order.details.length;o++){var n=this.order.details[o];if(n.lastScanQty>0)return t.showToast({title:"该条信息未扫描",icon:"none"}),void this.onSelectedItem(o);if(n.lastScanQty<0)return t.showToast({title:"该条信息未扫不能小于0",icon:"none"}),void this.onSelectedItem(o);if(n.lastScanQty+n.ScanQty===n.qualifiedQty)return t.showToast({title:"该条信息未扫或已扫数据有误.",icon:"none"}),void this.onSelectedItem(o)}t.showLoading({mask:!0}),s.default.acceptin_Save({data:{sheetNo:this.order.sheetNo},success:function(o){t.showToast({title:"保存成功"}),e.order={}},complete:function(e,o,s){i.default.tryCatchApi({status:e,message:o}),t.hideLoading()}})},onNumAdd:function(){if("填写制造工序"==this.head.custName1)return t.showToast({title:"填写制造工序",icon:"none"}),i.default.showAudio(),!0;if("填写不良现象"===this.head.bugName||0==this.head.bugName.length)return t.showToast({title:"请填写不良现象",icon:"none"}),i.default.showAudio(),!0;if(this.head.sheetQty<=0)return t.showToast({title:"不良数量必须要大于0",icon:"none"}),i.default.showAudio(),!0;for(var e=0;e<this.head.det.length;e++)if(this.head.det[e].itemNo==this.head.itemNo)return void t.showToast({title:"该工序已录入过不良信息",icon:"none"});this.head.det.push({sheetQty:Number(this.head.sheetQty),custName1:this.head.custName1,custNo:this.head.custNo,itemNo:this.head.itemNo,proName:this.head.custName1,proItemNo:this.head.itemNo,proNo:this.head.custNo,bugNo:this.head.bugNo,bugName:this.head.bugName}),this.head.sheetQty=0,this.processInfo="",this.head.bugNo="",this.head.bugName=""},to_custName1:function(){t.navigateTo({url:"../common/search-processList"})},to_bugName:function(){t.navigateTo({url:"/pages/common/search-bug-processList?proNo="+this.head.itemNo})},onprint_to:function(){0!=this.head.det.length?(a.default.set(n.default.storageKeys.navBackData_bug_data,this.head.det),i.default.dataInit(this),t.navigateBack()):t.showToast({title:"请录入不良数据",icon:"none"})}}};e.default=r}).call(this,o("6e42")["default"])},c2c7:function(t,e,o){}},[["f457","common/runtime","common/vendor"]]]);