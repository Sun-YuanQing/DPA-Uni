(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/process/production-printDet"],{"2a4d":function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(o("2e17")),r=s(o("f2a9")),a=s(o("00e0")),i=s(o("409c")),c=o("2f62");function s(e){return e&&e.__esModule?e:{default:e}}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),n.forEach(function(t){d(e,t,o[t])})}return e}function d(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var u=function(){return o.e("components/barcode-input/barcode-input").then(o.bind(null,"d7ce"))},f=function(){return o.e("components/label-print/print-button").then(o.bind(null,"4ae8"))},p={components:{barcodeInput:u,printButton:f},data:function(){return{progNo:"",reportModel:{progNo:"",showReport:!1,isMultiPrint:!1,dataSource:[],isNeedValidTag:!1},old:{scrollTop:0},scrollTop:0,scrollHeight:0,menu:"",menu_dele:!1,order:{inLot:"",poMoSoLot:"",proDate:" ",citemNo:"",suPartNo:"",sheetQty:0,createTagQty:0,lastTagQty:0,partItemNo:""},checked_all_show:!1,checked_all:!1,details:[],det_id:0,options_delet:[{text:"删除",style:{backgroundColor:"rgb(255,58,49)"}}]}},onLoad:function(e){this.reportModel.progNo=e.progNo,this.progNo=e.progNo,console.log(this.progNo," at pages\\process\\production-printDet.vue:132"),this.order=this.urldata,console.log("url传值长度"," at pages\\process\\production-printDet.vue:134"),this.menu=a.default.get(r.default.storageKeys.menu),this.menu_dele=!1;for(var t=0;t<this.menu.length;t++){var o=this.menu[t];console.log(o," at pages\\process\\production-printDet.vue:140"),o.progNo==this.progNo&&1==o.powerDelete&&(this.menu_dele=!0)}},onReady:function(){i.default.getListHeight(this);var t=this;""!=t.order.poMoSoLot&&n.default.OpenMes_scmreqbarcode({data:{moLot:t.order.purLot},success:function(e){e.length>0&&(e.forEach(function(e){e.checked=!1}),t.details=e),console.log(i.default.outputLog(t.details)," at pages\\process\\production-printDet.vue:165")},failure:function(e){t.$refs.input_part.setFocus(),i.default.showAudio()},complete:function(t,o,n){i.default.tryCatchApi({status:t,message:o}),e.hideLoading()}})},onBackPress:function(e){return i.default.backPress(e,this.details.length>0)},computed:(0,c.mapState)(["urldata"]),methods:l({},(0,c.mapMutations)(["pageIO_true"]),{onPartScaned:function(t){var o=this;e.showLoading({mask:!0}),n.default.basic_QRCodeAnalysis({data:{qrCode:t},success:function(t){for(var n=o,r=!1,a=0;a<o.details.length;a++){var c=o.details[a];c.tagId==t.tagId&&(n.onScrollTop(a),r=!0,n.onDelete())}if(!r)return e.showToast({title:"工单中不存在该标签！！！",icon:"none"}),i.default.showAudio(),void n.$refs.input_part.setFocus()},failure:function(e){i.default.showAudio()},complete:function(t,o,n){i.default.tryCatchApi({status:t,message:o}),e.hideLoading()}})},printComplete:function(){console.log("printComplete----------"," at pages\\process\\production-printDet.vue:231"),this.$refs.input_part.setFocus()},tagValid:function(e){console.log("tagValid----------"," at pages\\process\\production-printDet.vue:239"),this.$refs.input_part.setFocus()},scroll:function(e){this.old.scrollTop=e.detail.scrollTop},onScrollTop:function(t){var o=this;this.onSelectedItem(t);var n=e.createSelectorQuery().in(this).select(".scroll-view-item");n.boundingClientRect(function(e){o.scrollTop=o.old.scrollTop,null!=e&&o.$nextTick(function(){this.scrollTop=e.height*t})}).exec()},onSelectedItem:function(e){for(var t=!1,o=!0,n=0,r=this.details.length;n<r;n++){var a=this.details[n];void 0==a.checked&&(a.checked=!1),n==e?(a.selectItemClass="uni-list-cell-selected",this.orderItemSelected=a,a.checked=!a.checked):a.selectItemClass="",a.checked&&(t=!0),0==a.checked&&(o=!1)}1==t?(this.checked_all_show=!0,this.checked_all=o):this.checked_all_show=!1},list_checked:function(){var t=this;if(this.details.forEach(function(e){e.checked&&(e.proDate=new Date(e.proDate).format("yyyy/MM/dd")||(new Date).format("yyyy/MM/dd"),e.createDate=new Date(e.createDate).format("yyyy/MM/dd hh:mm:ss")||(new Date).format("yyyy/MM/dd hh:mm:ss"),e.partDefine1=e.partDefine1||t.order.partDefine1,e.partDefine2=e.partDefine2||t.order.partDefine2,e.partDefine3=e.partDefine3||t.order.partDefine3,e.partDefine4=e.partDefine4||t.order.partDefine4,e.partDefine5=e.partDefine5||t.order.partDefine5,e.partDefine6=e.partDefine6||t.order.partDefine3,e.partDefine7=e.partDefine7||t.order.partDefine7,e.partDefine8=e.partDefine8||t.order.partDefine8,e.partDefine9=e.partDefine9||t.order.partDefine9,e.partDefine10=e.partDefine10||t.order.partDefine10,t.reportModel.dataSource.push(e))}),0==+this.reportModel.dataSource)return e.showToast({title:"请选择标签！！！",icon:"none"}),void i.default.showAudio()},onPrint:function(){var t=this;if(!t.menu_dele)return e.showModal({title:"提示",content:"没有删除权限",showCancel:!1,success:function(e){e.confirm||e.cancel}}),void i.default.showAudio();t.list_checked(),t.$refs.printBtn.execPrint()},onprintCancel:function(){this.reportModel.dataSource=[]},onAll_100:function(){this.checked_all=!this.checked_all;var t=this.details.length;if(t>=100){for(var o=0;o<=100;o++){var n=this.details[o];n.checked=this.checked_all}e.showToast({title:"已选100个."})}else for(o=0;o<t;o++){n=this.details[o];n.checked=this.checked_all}if(!this.checked_all){for(o=0;o<t;o++){n=this.details[o];n.checked=this.checked_all}this.checked_all_show=!1}},onDelete:function(){var t=this,o="";return console.log("_self.menu_dele"+t.menu_dele," at pages\\process\\production-printDet.vue:381"),t.menu_dele?(t.list_checked(),t.reportModel.dataSource.forEach(function(e){o=0==o.length?e.id:o+","+e.id}),e.showModal({title:"提示",content:"是否要删除标签",success:function(r){if(r.confirm){for(var a=0;a<t.reportModel.dataSource.length;a++)for(var c=0;c<t.details.length;c++){var s=t.details[c],l=t.reportModel.dataSource[a];if(s.tagId==l.tagId){t.details.splice(c,1);break}}n.default.delete_OpenMes_scmreqbarcode({data:{id:o},success:function(o){e.showToast({title:"删除成功"}),i.default.showScanedAudio(),t.pageIO_true(),t.$refs.input_part.setFocus()},failure:function(e){i.default.showAudio()},complete:function(t,o,n){i.default.tryCatchApi({status:t,message:o}),e.hideLoading()}})}else r.cancel}}),void i.default.showAudio()):(e.showToast({title:"抱歉你没有权限删除！！！",icon:"none"}),void i.default.showAudio())}})};t.default=p}).call(this,o("6e42")["default"])},"60f4":function(e,t,o){"use strict";o.r(t);var n=o("c2ba"),r=o("7f97");for(var a in r)"default"!==a&&function(e){o.d(t,e,function(){return r[e]})}(a);o("8905");var i=o("2877"),c=Object(i["a"])(r["default"],n["a"],n["b"],!1,null,null,null);t["default"]=c.exports},"6dd4":function(e,t,o){},"7f97":function(e,t,o){"use strict";o.r(t);var n=o("2a4d"),r=o.n(n);for(var a in n)"default"!==a&&function(e){o.d(t,e,function(){return n[e]})}(a);t["default"]=r.a},8905:function(e,t,o){"use strict";var n=o("6dd4"),r=o.n(n);r.a},c2ba:function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},r=[];o.d(t,"a",function(){return n}),o.d(t,"b",function(){return r})}},[["e1e6","common/runtime","common/vendor"]]]);