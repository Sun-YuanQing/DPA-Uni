(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/process/process-offline"],{"2eca":function(e,t,n){"use strict";n.r(t);var o=n("8a46"),i=n("64a6");for(var s in i)"default"!==s&&function(e){n.d(t,e,function(){return i[e]})}(s);var a=n("2877"),r=Object(a["a"])(i["default"],o["a"],o["b"],!1,null,null,null);t["default"]=r.exports},"64a6":function(e,t,n){"use strict";n.r(t);var o=n("f5df"),i=n.n(o);for(var s in o)"default"!==s&&function(e){n.d(t,e,function(){return o[e]})}(s);t["default"]=i.a},"8a46":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i})},f5df:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n("2e17")),i=(s(n("f2a9")),s(n("00e0")),s(n("409c")));function s(e){return e&&e.__esModule?e:{default:e}}var a=function(){return n.e("components/barcode-input/barcode-input").then(n.bind(null,"d7ce"))},r=function(){return n.e("components/mpvue-picker/mpvuePicker").then(n.bind(null,"80f1"))},l=function(){return n.e("components/uni-popup-modal/uni-popup-modal").then(n.bind(null,"b32a"))},u={components:{barcodeInput:a,mpvuePicker:r,uniPopupModal:l},data:function(){return{old:{scrollTop:0},scrollTop:0,scrollHeight:0,m_endDate:(new Date).format("yyyy/MM/dd"),orderItemSelected:{},showPrint:!1,details:[]}},onLoad:function(e){},onReady:function(){i.default.getListHeight(this)},onBackPress:function(e){return i.default.backPress(e,this.details.length>0)},methods:{onOrderScaned:function(t){var n=this,s=this;e.showLoading({mask:!0}),o.default.OpenMes_mesdayworktimelistbymolot({data:{moLot:t},success:function(e){s.details=e;for(var t=0,n=s.details.length;t<n;t++)s.details[t].sheetDate=new Date(s.details[t].sheetDate).format("yyyy/MM/dd HH:mm:ss");s.details.length>0&&s.onScrollTop(0)},failure:function(e){i.default.showAudio()},complete:function(t,o,s){n.$refs.input_order.setFocus(),i.default.tryCatchApi({status:t,message:o}),e.hideLoading()}})},showDatePicker:function(){this.$refs.mpvuePicker.show()},onPickerConfirm:function(e){this.m_endDate=new Date(e.label).format("yyyy/MM/dd")},onShowPrint:function(e){this.showPrint=e},onSubmitPrint:function(t){var n=this,s="",a=new Date(this.orderItemSelected.sheetDate).format("yyyy/MM/dd");if(this.m_endDate==a&&a!=(new Date).format("yyyy/MM/dd")&&(s=this.m_endDate+" 23:59:00"),this.m_endDate==a&&a==(new Date).format("yyyy/MM/dd")&&(s=this.m_endDate+" "+(new Date).format("hh:mm:ss")),this.m_endDate!=a)return e.showToast({title:"上下线时间不是同一天！！！",icon:"none"}),void i.default.showAudio();this.showPrint=!1,o.default.Pda_pdamesdayworktimefinish({data:{id:this.orderItemSelected.id,endDate:s},success:function(t){e.showToast({title:"保存成功"}),i.default.dataInit(n),n.$refs.input_order.setFocus()},failure:function(e){i.default.showAudio()},complete:function(t,n,o){i.default.tryCatchApi({status:t,message:n}),e.hideLoading()}})},onSave:function(){if(0==this.details.length)return e.showToast({title:"请先扫描制造单号",icon:"none"}),i.default.showAudio(),void this.$refs.input_order.setFocus();this.showPrint=!0},scroll:function(e){this.old.scrollTop=e.detail.scrollTop},onScrollTop:function(t){var n=this;this.onSelectedItem(t);var o=e.createSelectorQuery().in(this).select(".scroll-view-item");o.boundingClientRect(function(e){n.scrollTop=n.old.scrollTop,n.$nextTick(function(){this.scrollTop=e.height*t})}).exec()},onSelectedItem:function(e){for(var t=0;t<this.details.length;t++){var n=this.details[t];t==e?(n.selectItemClass="uni-list-cell-selected",this.orderItemSelected=n):n.selectItemClass=""}}}};t.default=u}).call(this,n("6e42")["default"])}},[["8520","common/runtime","common/vendor"]]]);