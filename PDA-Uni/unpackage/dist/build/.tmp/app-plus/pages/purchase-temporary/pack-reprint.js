(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/purchase-temporary/pack-reprint"],{"7b8c":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(o("2e17")),a=(r(o("f2a9")),r(o("00e0")),r(o("409c")));function r(t){return t&&t.__esModule?t:{default:t}}var i=function(){return o.e("components/barcode-input/barcode-input").then(o.bind(null,"d7ce"))},s=function(){return o.e("components/label-print/print-button").then(o.bind(null,"4ae8"))},l={components:{barcodeInput:i,printButton:s},data:function(){var t=new Date;return{reportModel:{progNo:"",showReport:!1,isMultiPrint:!1,dataSource:[],isNeedValidTag:!1},showPrint:!1,old:{scrollTop:0},scrollTop:0,scrollHeight:0,tagId:null,details:[],orderItemSelected:{},pickerValueDefault:t}},onLoad:function(t){this.reportModel.progNo=t.progNo||"OPDA00001"},onReady:function(){a.default.getListHeight(this)},onBackPress:function(t){return a.default.backPress(t,this.details>0)},methods:{onPartScaned:function(e){var o=this;t.showLoading({mask:!0}),n.default.basic_QRCodeAnalysis({data:{qrCode:e},success:function(e){if(console.log(JSON.stringify(e)," at pages\\purchase-temporary\\pack-reprint.vue:97"),e.bztype>1)return t.showToast({title:"不支持卡板，混装！",icon:"none"}),a.default.showAudio(),void o.$refs.input_part.setFocus();e.scan_tagId=e.tagId;if(o.orderItemSelected.partItemNo)for(var n=0;n<o.details.length;n++){var r=o.details[n];if(r.tagId!=e.tagId)return t.showToast({title:"请扫描相同标签！！！",icon:"none"}),void a.default.showAudio();o.details.push(e),o.onSelectedItem(o.details.length-1);break}else o.details.push(e),o.onSelectedItem(0);t.showToast({title:"扫描成功"}),a.default.showScanedAudio()},failure:function(t){a.default.showAudio()},complete:function(e,n,r){o.$refs.input_part.setFocus(),a.default.tryCatchApi({status:e,message:n}),t.hideLoading()}})},Proint:function(){console.log(1," at pages\\purchase-temporary\\pack-reprint.vue:149");var e=this,o=1,n=(new Date).format("yyMMddHHmmssfff"),r=0;if(!(this.details.length<2)){if(this.details.forEach(function(t,o){t.tagId==e.orderItemSelected.tagId&&(r+=1)}),!(r>1))return t.showToast({title:"没有两个标签相同！！！",icon:"none"}),a.default.showAudio(),void this.$refs.input_part.setFocus();if(!this.orderItemSelected.partItemNo)return t.showToast({title:"请选择标签！！！",icon:"none"}),a.default.showAudio(),void this.$refs.input_part.setFocus();var i=a.default.clone(e.orderItemSelected);this.tagId="".concat(n,"-").concat(a.default.getSuffix(3,o)),i.tagId=this.tagId,e.reportModel.dataSource.push(i),this.$refs.printBtn.execPrint()}},printComplete:function(){console.log(1," at pages\\purchase-temporary\\pack-reprint.vue:193"),null!=this.tagId?(this.orderItemSelected.tagId=this.tagId,t.showToast({title:"已重置一张标签^_^"})):(this.orderItemSelected.tagId="未知错误！！！",t.showToast({title:"",icon:"none"}),a.default.showAudio()),this.$refs.input_part.setFocus()},tagValid:function(t){console.log(2," at pages\\purchase-temporary\\pack-reprint.vue:212"),console.log(a.default.outputLog(t)," at pages\\purchase-temporary\\pack-reprint.vue:213"),a.default.dataInit(this),this.$refs.input_part.setFocus()},onprintCancel:function(){console.log(3," at pages\\purchase-temporary\\pack-reprint.vue:218"),a.default.dataInit(this),this.$refs.input_part.setFocus()},scroll:function(t){this.old.scrollTop=t.detail.scrollTop},onScrollTop:function(e){var o=this;this.onSelectedItem(e);var n=t.createSelectorQuery().in(this).select(".scroll-view-item");n.boundingClientRect(function(t){o.scrollTop=o.old.scrollTop,o.$nextTick(function(){this.scrollTop=t.height*e})}).exec()},onSelectedItem:function(t){for(var e=0;e<this.details.length;e++){var o=this.details[e];e==t?(o.selectItemClass="uni-list-cell-selected",this.orderItemSelected=o):o.selectItemClass=""}}}};e.default=l}).call(this,o("6e42")["default"])},"84cc":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},a=[];o.d(e,"a",function(){return n}),o.d(e,"b",function(){return a})},d595:function(t,e,o){"use strict";o.r(e);var n=o("84cc"),a=o("f1ac");for(var r in a)"default"!==r&&function(t){o.d(e,t,function(){return a[t]})}(r);var i=o("2877"),s=Object(i["a"])(a["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},f1ac:function(t,e,o){"use strict";o.r(e);var n=o("7b8c"),a=o.n(n);for(var r in n)"default"!==r&&function(t){o.d(e,t,function(){return n[t]})}(r);e["default"]=a.a}},[["e3f9","common/runtime","common/vendor"]]]);