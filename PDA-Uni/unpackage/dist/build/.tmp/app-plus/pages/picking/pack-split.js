(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/picking/pack-split"],{"0563":function(t,e,o){"use strict";o.r(e);var n=o("0694"),i=o.n(n);for(var s in n)"default"!==s&&function(t){o.d(e,t,function(){return n[t]})}(s);e["default"]=i.a},"0694":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=l(o("2e17")),i=l(o("f2a9")),s=l(o("00e0")),a=l(o("409c"));function l(t){return t&&t.__esModule?t:{default:t}}var r=function(){return o.e("components/barcode-input/barcode-input").then(o.bind(null,"d7ce"))},c=function(){return Promise.all([o.e("common/vendor"),o.e("components/lotunpack/lotunpack")]).then(o.bind(null,"acb4"))},u={components:{barcodeInput:r,lotunpack:c},data:function(){return{progNo:"",details:[],old:{scrollTop:0},scrollTop:0,scrollHeight:0,isStorageBin:null,showLotUnpack:!1,printMode:{}}},onLoad:function(t){this.progNo=t.progNo||"OPDA00014",console.log(this.progNo," at pages\\picking\\pack-split.vue:68"),this.isStorageBin=s.default.get(i.default.storageKeys.IsStorageBin)},onReady:function(){a.default.getListHeight(this)},onBackPress:function(t){return a.default.backPress(t,this.details.length>0)},methods:{onScaned:function(e){var o=this;t.showLoading({mask:!0}),n.default.basic_QRCodeAnalysis({data:{qrCode:e},success:function(t){o.isStorageBin?o.hasBinNo=0!=t.binNo.trim().length:0==t.binWhNo.trim().length?o.hasBinNo=!1:o.hasBinNo=!0,o.printMode=t,o.printMode.qrCode=e,o.showLotUnpack=!0,console.log("this.showLotUnpack: "+JSON.stringify(o.showLotUnpack)," at pages\\picking\\pack-split.vue:101"),o.$refs.input_part.setFocus(),a.default.showScanedAudio()},failure:function(t){o.$refs.input_order.clear(),o.$refs.input_order.setFocus(),a.default.showAudio()},complete:function(e,o,n){a.default.tryCatchApi({status:e,message:o}),t.hideLoading()}})},onPartScaned:function(e){var o=this;t.showLoading({mask:!0}),n.default.basic_QRCodeAnalysis({data:{qrCode:e},success:function(n){console.log(JSON.stringify(n)," at pages\\picking\\pack-split.vue:128");for(var i=function(e){if(o.details[e].tagId==n.tagId)return o.onScrollTop(e),l=o,t.showModal({title:"提示",content:"该标签已扫描,是否要删除",success:function(t){t.confirm?l.details.splice(e,1):t.cancel}}),a.default.showAudio(),{v:void 0}},s=0;s<o.details.length;s++){var l,r=i(s);if("object"===typeof r)return r.v}if(o.printMode.partItemNo==n.partItemNo&&o.printMode.inLot==n.inLot){var c=a.default.clone(o.printMode);c.tagId=n.tagId,c.sheetQty=Number(n.sheetQty),c.qrCode=e,c.inoutFlag="1",o.details.push(c),a.default.showScanedAudio()}else t.showToast({title:"扫描的新标签与原标签不一致",icon:"none"}),a.default.showAudio()},failure:function(t){a.default.showAudio()},complete:function(e,n,i){o.$refs.input_part.setFocus(),a.default.tryCatchApi({status:e,message:n}),t.hideLoading()}})},onShowPrint:function(){if(!this.printMode.qrCode||0==this.printMode.qrCode.trim().length)return t.showToast({title:"请扫描标签",icon:"none"}),void this.$refs.input_order.setFocus();this.showLotUnpack=!0},onSave:function(e){var o=this;if(0!=this.details.length){for(var i=0,s=0;s<this.details.length;s++)i=a.default.floatObj.add(this.details[s].sheetQty,i);if(Number(this.printMode.sheetQty)==Number(i)){var l=a.default.clone(this.details),r=a.default.clone(this.printMode);if(r.inoutFlag="2",l.insert(0,r),console.log("list: "+JSON.stringify(l)," at pages\\picking\\pack-split.vue:211"),!this.hasBinNo)return t.showToast({title:"保存成功",icon:"none"}),this.details=[],a.default.dataInit(this),this.$refs.input_order.clear(),void this.$refs.input_order.setFocus();t.showLoading({mask:!0}),n.default.binno_split({data:l,success:function(e){t.showToast({title:"保存成功",icon:"none"}),o.details=[],a.default.dataInit(o),o.$refs.input_order.clear(),o.$refs.input_order.setFocus()},failure:function(t){a.default.showAudio()},complete:function(e,o,n){a.default.tryCatchApi({status:e,message:o}),t.hideLoading()}})}else t.showToast({title:"分拆的标签没有扫完",icon:"none"})}else t.showToast({title:"请扫描新标签",icon:"none"})},onSelectedItem:function(t){for(var e=0;e<this.details.length;e++){var o=this.details[e];o.selectItemClass=e==t?"uni-list-cell-selected":""}},scroll:function(t){this.old.scrollTop=t.detail.scrollTop},onScrollTop:function(e){var o=this;this.onSelectedItem(e);var n=t.createSelectorQuery().in(this).select(".scroll-view-item");n.boundingClientRect(function(t){o.scrollTop=o.old.scrollTop,o.$nextTick(function(){this.scrollTop=t.height*e})}).exec()},lotupackCancel:function(){this.showLotUnpack=!1,this.$refs.input_part.setFocus()}}};e.default=u}).call(this,o("6e42")["default"])},3673:function(t,e,o){"use strict";o.r(e);var n=o("702c"),i=o("0563");for(var s in i)"default"!==s&&function(t){o.d(e,t,function(){return i[t]})}(s);var a=o("2877"),l=Object(a["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=l.exports},"702c":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},i=[];o.d(e,"a",function(){return n}),o.d(e,"b",function(){return i})}},[["91c6","common/runtime","common/vendor"]]]);