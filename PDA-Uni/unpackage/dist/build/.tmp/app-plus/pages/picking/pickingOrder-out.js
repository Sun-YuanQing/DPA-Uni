(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/picking/pickingOrder-out"],{"3dc1":function(t,e,o){"use strict";o.r(e);var n=o("4c59"),i=o.n(n);for(var s in n)"default"!==s&&function(t){o.d(e,t,function(){return n[t]})}(s);e["default"]=i.a},"4c59":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(o("2e17")),i=(s(o("f2a9")),s(o("00e0")),s(o("409c")));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){return o.e("components/barcode-input/barcode-input").then(o.bind(null,"d7ce"))},l={components:{barcodeInput:u},data:function(){return{whNo:"",old:{scrollTop:0},scrollTop:0,scrollHeight:0,details:[]}},onLoad:function(t){this.progNo=t.progNo},onReady:function(){i.default.getListHeight(this)},onBackPress:function(t){return i.default.backPress(t,this.details.length>0)},methods:{onStorageScaned:function(e){var o=this;n.default.bas_wh({data:{filter:'whNo = "'+e+'"'},success:function(n){console.log(i.default.outputLog(n)," at pages\\picking\\pickingOrder-out.vue:80"),n.length<=0?(t.showToast({title:"仓库不存在!",icon:"none"}),o.$refs.input_store.clear(),o.$refs.input_store.setFocus(),i.default.showAudio()):(o.whNo=e,o.$refs.input_order.setFocus(),i.default.showScanedAudio())},failure:function(t){i.default.showAudio(),o.$refs.input_store.setFocus()},complete:function(e,o,n){i.default.tryCatchApi({status:e,message:o}),t.hideLoading()}})},onOrderScaned:function(e){var o=this;n.default.pickingOrder_out_GetList({data:{moLot:e},success:function(e){console.log(i.default.outputLog(e)," at pages\\picking\\pickingOrder-out.vue:115");for(var n=0;n<o.details.length;n++)if(o.details[n].purLot==e.purLot)return t.showToast({title:"该工单已扫描!",icon:"none"}),i.default.showAudio(),void o.onScrollTop(n);0==e.controlDetails.length?(t.showToast({title:"该工单没有物控档!",icon:"none"}),i.default.showAudio()):o.details.length>0&&o.details[0].citemNo!=e.citemNo?(t.showToast({title:"部门不一样不允许合并发料!",icon:"none"}),i.default.showAudio()):(o.details.push(e),o.onScrollTop(o.details.length-1),i.default.showScanedAudio())},failure:function(t){i.default.showAudio()},complete:function(e,n,s){o.$refs.input_order.setFocus(),i.default.tryCatchApi({status:e,message:n}),t.hideLoading()}})},onSave:function(){var e=this;if(0==e.whNo.trim().length)return t.showToast({title:"请扫描仓库!",icon:"none"}),void e.$refs.input_store.setFocus();if(0==e.details.length)return t.showToast({title:"请扫描要领料的工单!",icon:"none"}),void e.$refs.input_order.setFocus();for(var o="",n=0;n<e.details.length;n++)o+=e.details[n].purLot+",";o=o.substring(0,o.length-1),t.navigateTo({url:"/pages/picking/pickingOrder-outDet?progNo="+e.progNo+"&whNo="+e.whNo+"&orders="+o})},onSelectedItem:function(t){for(var e=i.default.clone(this.details),o=0;o<e.length;o++){var n=e[o];n.selectItemClass=o==t?"uni-list-cell-selected":""}this.details=e},scroll:function(t){this.old.scrollTop=t.detail.scrollTop},onScrollTop:function(e){var o=this;this.onSelectedItem(e);var n=t.createSelectorQuery().in(this).select(".scroll-view-item");n.boundingClientRect(function(t){o.scrollTop=o.old.scrollTop,o.$nextTick(function(){null!=t&&(this.scrollTop=t.height*e)})}).exec()}}};e.default=l}).call(this,o("6e42")["default"])},"5f65":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=(t._self._c,t.__map(t.details,function(e,o){var n=t._f("dateFormat")(e.sheetDate);return{$orig:t.__get_orig(e),f0:n}}));t.$mp.data=Object.assign({},{$root:{l0:o}})},i=[];o.d(e,"a",function(){return n}),o.d(e,"b",function(){return i})},"637c":function(t,e,o){"use strict";o.r(e);var n=o("5f65"),i=o("3dc1");for(var s in i)"default"!==s&&function(t){o.d(e,t,function(){return i[t]})}(s);var u=o("2877"),l=Object(u["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=l.exports}},[["4a30","common/runtime","common/vendor"]]]);