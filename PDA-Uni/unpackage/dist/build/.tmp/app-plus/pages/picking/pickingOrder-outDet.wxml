<view><view id="viewHeader"><barcode-input class="vue-ref" vue-id="1" focus="{{true}}" placeholder="请扫描内包装" data-ref="input_part" data-event-opts="{{[['^onScaned',[['onPartScaned']]]]}}" bind:onScaned="__e" bind:__l="__l"></barcode-input></view><scroll-view style="{{'height:'+(scrollHeight)+';'}}" scroll-top="{{scrollTop}}" scroll-y="true" data-event-opts="{{[['scroll',[['scroll',['$event']]]]]}}" bindscroll="__e"><view class="uni-list"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block><uni-card class="{{['scroll-view-item',item.$orig.selectItemClass]}}" vue-id="{{'2-'+index}}" title="{{item.f0}}" is-shadow="true" note="true" extra="{{item.m0}}" data-event-opts="{{[['^click',[['onSelectedItem',[index]]]]]}}" bind:click="__e" bind:__l="__l" vue-slots="{{['default','footer']}}"><view slot="footer"><view class="footer-box"><view data-event-opts="{{[['tap',[['showHideStor',['$0'],[[['details','',index]]]]]]]}}" class="footer-box__item" catchtap="__e"><text>{{''+(item.$orig.binLots.length>0&&item.$orig.showLotStor?'隐藏':'显示')+"库存"}}</text></view><view data-event-opts="{{[['tap',[['footerClick',['$0'],[[['details','',index]]]]]]]}}" class="footer-box__item" catchtap="__e"><text>按多发料仓发料</text></view></view></view><view class="uni-triplex-row"><view class="uni-triplex-left"><text class="uni-title">{{"制造批号:"+item.$orig.sheetNo}}</text><block wx:if="{{item.$orig.bomType!=0}}"><block><text class="uni-title">{{"主料料号:"+item.$orig.mitemNo}}</text><text class="uni-title">{{"主料欠料:"+item.$orig.zlQLQty}}</text><text class="uni-title">{{"主料应发:"+item.$orig.zlLastScanQty}}</text></block></block><block wx:else><text class="uni-title">{{"欠料数量:"+item.$orig.qlQty}}</text></block><block wx:if="{{item.$orig.whNo5.length>0}}"><block><text class="uni-title">{{"多发仓可用数量:"+item.$orig.totalFactQty5}}</text><text class="uni-title" style="border-top:1px solid #CCCCCC;">{{"多发料领用量:"+item.$orig.outPreQty5}}</text></block></block><block wx:if="{{item.$orig.bomType==0}}"><text class="uni-title">{{"替代料领用量:"+item.$orig.childScanQty}}</text></block><text class="uni-title">{{"扫描数量:"+item.$orig.scanQty}}</text><text class="uni-title">{{"应发数量:"+item.$orig.lastScanQty}}</text></view><view class="uni-triplex-right" style="min-width:220rpx;"><text class="uni-h5">{{"仓库:"+item.$orig.whName}}</text><text class="uni-h5">{{"单位用量:"+item.$orig.unitQty}}</text></view></view><block wx:if="{{item.$orig.binLots.length>0&&item.$orig.showLotStor}}"><view class="uni-triplex-row"><view class="div-table fixed-thead"><view class="thead"><view class="th"><view class="td" style="width:20%;">库位</view><view class="td" style="width:60%;">批次</view><view class="td" style="width:20%;">数量</view></view></view><view class="tbody"><block wx:for="{{item.$orig.binLots}}" wx:for-item="lotItem" wx:for-index="lotIndex" wx:key="lotIndex"><block><block wx:if="{{lotIndex==0}}"><view class="tr"><view class="td" style="width:20%;font-weight:bold;font-size:14px;">{{isStorageBin?lotItem.binNo:lotItem.whNo}}</view><view class="td" style="width:60%;font-weight:bold;font-size:14px;word-break:break-all;">{{lotItem.inLot}}</view><view class="td" style="width:20%;font-weight:bold;font-size:14px;">{{lotItem.sheetQty}}</view></view></block><block wx:else><view class="tr"><view class="td" style="width:20%;">{{isStorageBin?lotItem.binNo:lotItem.whNo}}</view><view class="td" style="width:60%;">{{lotItem.inLot}}</view><view class="td" style="width:20%;">{{lotItem.sheetQty}}</view></view></block></block></block></view></view></view></block></uni-card></block></block></view></scroll-view><page-foot class="vue-ref" vue-id="3" data-ref="viewBtm" bind:__l="__l" vue-slots="{{['default']}}"><button type="primary" data-event-opts="{{[['tap',[['onSave',['$event']]]]]}}" bindtap="__e">保存</button></page-foot><lotunpack vue-id="4" show="{{showLotUnpack}}" model="{{printMode}}" printDetail="{{printDetail}}" progNo="{{progNo}}" data-event-opts="{{[['^cancel',[['lotupackCancel']]]]}}" bind:cancel="__e" bind:__l="__l"></lotunpack></view>