(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"06a5":function(e,t,n){},"54cd":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement;e._self._c},o=[];n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o})},"56c5":function(e,t,n){"use strict";n.r(t);var i=n("a7d3"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,function(){return i[e]})}(a);t["default"]=o.a},"5f15":function(e,t,n){"use strict";n.r(t);var i=n("54cd"),o=n("56c5");for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);n("c95e");var s=n("2877"),u=Object(s["a"])(o["default"],i["a"],i["b"],!1,null,null,null);t["default"]=u.exports},a7d3:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("2f62"),o=r(n("f2a9")),a=r(n("00e0")),s=r(n("2e17")),u=r(n("409c"));function r(e){return e&&e.__esModule?e:{default:e}}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){l(e,t,n[t])})}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(){return n.e("components/uni-upgrade/uni-upgrade").then(n.bind(null,"a04f"))},f={components:{uniUpgrade:g},data:function(){return{userID:"",userPass:"",autologin:!0,accIndex:null,accList:[],isUpgrade:!1,packageUrl:"",sessionLost:!1,appVer:"",user_focus:!1,copyRightPosition:"fixed",scrollHeight:0}},onNavigationBarButtonTap:function(t){e.navigateTo({url:"/pages/appconfig/appconfig"})},onLoad:function(e){this.sessionLost=e.sessionLost||!1},onReady:function(t){var n=this,i=0,r=0,c=e.createSelectorQuery().in(this).select("#viewHeader");c.boundingClientRect(function(e){null!=e&&(i=e.height)}).exec(),c=e.createSelectorQuery().in(this).select("#viewBtm"),c.boundingClientRect(function(e){null!=e&&(r=e.height)}).exec(function(){e.getSystemInfo({success:function(e){var t=e.windowHeight-i-r-40;n.scrollHeight=t+"px",n.copyRightPosition="static"}})});var l=a.default.get(o.default.storageKeys.serverPrefixUrl),g=a.default.get(o.default.storageKeys.serverUrl);if(!l)return e.showToast({title:"请先配置服务器地址",icon:"none"}),void e.navigateTo({url:"/pages/appconfig/appconfig"});plus.runtime.getProperty(plus.runtime.appid,function(t){e.showLoading(),n.appVer=t.version,s.default.upgrade({data:{ver:t.version,custVer:""},retry:3,success:function(e){1==e?(n.packageUrl=g+"pda/upgrade/download?ver="+t.version,n.isUpgrade=!0):(n.getdbmap(),n.user_focus=!0)},complete:function(t,n,i){u.default.tryCatchApi({status:t,message:n}),e.hideLoading()}})})},methods:c({},(0,i.mapMutations)(["login"]),{getdbmap:function(){var t=this;e.showLoading(),s.default.getdbmap({retry:3,success:function(e){t.accList=e,t.accIndex=0;var n=a.default.get(o.default.storageKeys.login);void 0!=n&&(t.autologin=n.autologin,n.autologin?(t.accIndex=t.accList.indexOf(n.dbMap),t.userPass=n.userPass,t.bindLogin()):t.userID=n.userID)},complete:function(t,n,i){u.default.tryCatchApi({status:t,message:n}),e.hideLoading()}})},bindPickerChange:function(e){this.accIndex=e.target.value},autoLoginChange:function(e){this.autologin=e.target.value},bindLogin:function(t){var n=this;if(this.accIndex<0)e.showToast({title:"请输入账套",icon:"none"});else if(this.userID.trim()){e.showLoading();var i={dbMap:this.accList[this.accIndex],userID:this.userID,userPass:this.userPass,computerName:this.getDeviceInfo()};console.log("userInfo: "+JSON.stringify(i)," at pages\\login\\login.vue:211"),s.default.login({data:i,success:function(t){console.log(JSON.stringify(t)," at pages\\login\\login.vue:215"),i.sessionId=t.sessionId,i.userName=t.userName,i.autologin=n.autologin,i.loginDatetime=t.loginDatetime,a.default.set(o.default.storageKeys.login,i),n.login(i),n.sessionLost?e.navigateBack({delta:1,animationType:"pop-out",animationDuration:200}):e.reLaunch({url:"/pages/index/index"})},complete:function(t,n,i){u.default.tryCatchApi({status:t,message:n}),e.hideLoading()}})}else e.showToast({title:"请输入账号",icon:"none"})},getDeviceInfo:function(){var e="";return e=plus.device.uuid,console.log(e," at pages\\login\\login.vue:258"),e}})};t.default=f}).call(this,n("6e42")["default"])},c95e:function(e,t,n){"use strict";var i=n("06a5"),o=n.n(i);o.a}},[["8154","common/runtime","common/vendor"]]]);